Do we need threadfences? Can we inline asm in Triton? (No)
Do we need fine-grain memory? Seems to be working when using atomics...


It seems like Triton doesnt have memory fences; is atomic Cas enough?

A simple put and spin, seems to get optimized away...
e.g.,

while tl.load() == 0:
    pass
unless it has some dummy code inside...
maybe cache modifiers work? i saw they were bugged at some point..
load has volatile  too (streamK example has cv but only  ca cg are in docs)

See questions in code..

Why doesnt CAS take a mask?
Structs? encapsulation in Triton?

if cas doesn't work, we might update with (block of flags + reduce) or atomic add and wait for flag to reach block_size.. both would be bad
